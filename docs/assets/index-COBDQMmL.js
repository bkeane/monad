import{c as A,a as c,o as p,b as t,n as C,t as $,r as l,d as b,e as i,F as k,f as z,u as x,g as B,h as I,i as j,j as K,k as q}from"./@vue-C9Fkr3d8.js";/* empty css                 */import{H as w,b as R,d as E}from"./highlight.js-D4wtHl8c.js";import{e as f}from"./endent-Clm5LqZb.js";import"./dedent-DLT5raRU.js";import"./objectorarray-BuWbUJTR.js";import"./fast-json-parse-CjGQNN3V.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))d(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&d(o)}).observe(document,{childList:!0,subtree:!0});function s(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function d(n){if(n.ep)return;n.ep=!0;const r=s(n);fetch(n.href,r)}})();const u=(a,e)=>{const s=a.__vccOpts||a;for(const[d,n]of e)s[d]=n;return s},G={};function Z(a,e){return e[0]||(e[0]=A('<h3>Three Factor Deployments</h3><p> Monad uses convention to reduce the number of factors necessary for deploying an application from <a href="https://12factor.net/">twelve</a> to three. </p> The remaining factors are: <ol><li><strong>Codebase</strong> - A git repository. </li><li><strong>Dependencies</strong> - ECR image/s. </li><li><strong>Configuration</strong> - Environment variables. </li></ol>',4))}const X=u(G,[["render",Z]]),W={};function T(a,e){return p(),c("div",null,e[0]||(e[0]=[A("<h3 data-v-b6b0f9e9>Design</h3><h5 data-v-b6b0f9e9>Single Binary</h5><p data-v-b6b0f9e9> Monad is a single binary that can be used directly from developer machines and from CI/CD pipelines. </p><h5 data-v-b6b0f9e9>Git Ops</h5><p data-v-b6b0f9e9> Monad uses conventions on top of git to allow all services on all branches to be deployed at any given time without conflict. All resources generated by Monad are tagged with git provenance data and all resource naming is likewise git interpolated. </p><h5 data-v-b6b0f9e9>OCI Artifact</h5><p data-v-b6b0f9e9> The deployable artifact of Monad is an OCI compliant container image hosted on ECR. </p><h5 data-v-b6b0f9e9>No State File</h5><p data-v-b6b0f9e9> AWS is the uncontested source of truth for AWS state. And so Monad uses the AWS Api for truth. </p><p data-v-b6b0f9e9> Monad manages a deterministic set of shapes in AWS and does not need to grapple with arbitrary resource schema migration. </p><h5 data-v-b6b0f9e9>No Yaml</h5><p data-v-b6b0f9e9> At run-time Monad derives it&#39;s configuration from available surrounding resources such as git, AWS caller identity and target AWS account information. </p><h5 data-v-b6b0f9e9>Minimal</h5><p data-v-b6b0f9e9> Optionally provided configuration files are simply JSON request bodies documented extensively by AWS. </p><h5 data-v-b6b0f9e9>DRY</h5><p data-v-b6b0f9e9> Optionally provided configuration is always passed through a templating engine containing a utilitarian set of variables designed for cross-account compatibility. </p><h5 data-v-b6b0f9e9>Least Privilege</h5><p data-v-b6b0f9e9> Monad follows the principle of least privilege, ensuring all services are hermetically constrained by default. Adjusting permissions is easy, auditable, and granular to the needs of services and teams. </p>",18)]))}const U=u(W,[["render",T],["__scopeId","data-v-b6b0f9e9"]]),V={props:{language:{type:String,required:!1,default:"bash"},code:{type:String,required:!0}},mounted(){this.highlightCode()},watch:{code(){this.highlightCode()}},methods:{highlightCode(){this.$el.querySelectorAll("pre code").forEach(e=>{w.highlightElement(e)})}}};function N(a,e,s,d,n,r){return p(),c("div",null,[t("pre",null,[t("code",{class:C(s.language)},`
`+$(s.code)+`
        `,3)])])}const m=u(V,[["render",N]]),F={components:{Code:m},data(){return{brew:f`
brew tap bkeane/tools
brew install bkeane/tools/monad
            `,action:f`
- uses: bkeane/monad-action@v1
            `}}},Y={class:"grid"},Q={class:"grid"};function H(a,e,s,d,n,r){const o=l("Code");return p(),c("div",null,[e[2]||(e[2]=t("h4",null,"Install",-1)),e[3]||(e[3]=t("h6",null,[b("Homebrew ("),t("a",{href:"https://github.com/bkeane/monad/releases"},"releases"),b(")")],-1)),t("div",Y,[i(o,{code:n.brew},null,8,["code"]),e[0]||(e[0]=t("div",null,null,-1))]),e[4]||(e[4]=t("h6",null,[b("Github Actions ("),t("a",{href:"https://github.com/marketplace/actions/monad-action"},"releases"),b(")")],-1)),t("div",Q,[i(o,{code:n.action},null,8,["code"]),e[1]||(e[1]=t("div",null,null,-1))])])}const L=u(F,[["render",H]]),J={props:{columns:{type:Array,required:!0}}},ee={class:"grid"};function te(a,e,s,d,n,r){return p(),c("div",ee,[(p(!0),c(k,null,z(s.columns,o=>(p(),c("div",{key:o},[t("h6",null,$(o),1)]))),128))])}const P=u(J,[["render",te]]),ne={props:{png:{type:String,required:!0}}},oe=["src"];function ae(a,e,s,d,n,r){return p(),c("div",null,[t("img",{src:s.png},null,8,oe)])}const S=u(ne,[["render",ae],["__scopeId","data-v-5b9bf001"]]),se="/monad/assets/git-graph-1-BLbbkDOH.png",re={props:{git:{type:{owner:String,repo:String,service:String,branch:String,sha:String},required:!0}},components:{Header:P,Code:m,Diagram:S},data(){return{png:se,code:f`
git init
git add origin https://github.com/${this.git.owner}/${this.git.repo}
git checkout -b ${this.git.branch}
monad init <language>
            `}}},ie={class:"grid"};function de(a,e,s,d,n,r){const o=l("Code"),v=l("Diagram");return p(),c("div",null,[e[0]||(e[0]=t("h4",null,"Init",-1)),t("div",ie,[i(o,{code:n.code},null,8,["code"]),i(v,{png:n.png},null,8,["png"])])])}const le=u(re,[["render",de]]),pe={components:{Code:m},data(){return{code:f`
docker build -t $(monad --service <name> ecr tag) --push .`}}},ce={class:"grid"};function ue(a,e,s,d,n,r){const o=l("Code");return p(),c("div",ce,[t("div",null,[e[0]||(e[0]=t("h4",null,"Publish",-1)),i(o,{code:n.code},null,8,["code"])]),e[1]||(e[1]=t("div",null,null,-1))])}const me=u(pe,[["render",ue]]),ge="data:image/png;base64,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",ve="/monad/assets/deployment-webserver-1-CypagEGu.png",fe="/monad/assets/deployment-worker-1-DL4hhcfV.png",be="/monad/assets/deployment-combo-1-Sh92kApQ.png",he={components:{Header:P,Code:m,Diagram:S},props:{git:{type:{owner:String,repo:String,service:String,branch:String},required:!0},resource:{type:{name:String,path:String,image:String,logGroup:String,tags:Object},required:!0}},data(){return{diagrams:[{title:"Function",command:"monad --service <name> deploy",gateway:!1,rule:!1,png:ge},{title:"Webserver",command:"monad --service <name> deploy --api $api_gateway_name",gateway:!0,rule:!1,png:ve},{title:"Worker",command:"monad --service <name> deploy --rule file://rule.json",gateway:!1,rule:!0,png:fe},{title:"Webserver + Worker",command:"monad --service <name> deploy --rule file://rule.json --api $api_gateway_name",gateway:!0,rule:!0,png:be}]}}},ye={class:"grid"};function Ae(a,e,s,d,n,r){const o=l("Header"),v=l("Code"),h=l("Diagram");return p(),c("div",null,[e[0]||(e[0]=t("h4",null,"Deploy",-1)),(p(!0),c(k,null,z(n.diagrams,g=>(p(),c("div",{key:g.title},[i(o,{columns:[g.title,""]},null,8,["columns"]),t("div",ye,[i(v,{code:g.command,title:g.title},null,8,["code","title"]),i(h,{png:g.png},null,8,["png"])])]))),128))])}const we=u(he,[["render",Ae]]),_e={components:{Code:m}},Me={class:"grid"};function De(a,e,s,d,n,r){const o=l("Code");return p(),c("div",Me,[t("div",null,[e[0]||(e[0]=t("h4",null,"Destroy",-1)),i(o,{code:"monad --service <name> destroy"})]),e[1]||(e[1]=t("div",null,null,-1))])}const $e=u(_e,[["render",De]]),ke={components:{Code:m},data(){return{code:f`
monad -h
            `}}},ze={class:"grid"};function Pe(a,e,s,d,n,r){const o=l("Code");return p(),c("div",ze,[t("div",null,[e[0]||(e[0]=t("h4",null,"More",-1)),i(o,{code:n.code},null,8,["code"])]),e[1]||(e[1]=t("div",null,null,-1))])}const Se=u(ke,[["render",Pe]]),Oe={components:{Install:L,Init:le,Publish:me,Deploy:we,Destroy:$e,More:Se},data(){return{git:{owner:"owner",repo:"repo",branch:"example",sha:"abd50b21",service:"service"},resource:{name:"",path:"",image:"",logGroup:"",route:"",tags:{}}}},created(){this.initializeData()},methods:{initializeData(){const{branch:a,sha:e,repo:s,service:d,owner:n}=this.git;this.resource={name:`${s}-${a}-${d}`,path:`/${s}/${a}/${d}`,image:`${n}/${s}/${d}:${a}`,logGroup:`/aws/lambda/${s}/${a}/${d}`,route:`/${s}/${a}/${d}/{proxy+}`,tags:{Monad:!0,Branch:a,Sha:e,Service:d,Owner:n,Repo:s}}}}};function Ce(a,e,s,d,n,r){const o=l("Install"),v=l("Init"),h=l("Publish"),g=l("Deploy"),y=l("Destroy"),O=l("More");return p(),c("div",null,[e[0]||(e[0]=t("h3",null,"Usage",-1)),i(o,{git:n.git},null,8,["git"]),i(v,{git:n.git},null,8,["git"]),i(h),i(g,{git:n.git,resource:n.resource},null,8,["git","resource"]),i(y),i(O)])}const xe=u(Oe,[["render",Ce]]),Be={name:"Policy",components:{Code:m},data(){return{policy:"monad deploy --policy file://policy.json",trust:"monad deploy --role file://trust.json"}}};function Ie(a,e,s,d,n,r){const o=l("Code");return p(),c("div",null,[e[0]||(e[0]=t("h4",null,"IAM",-1)),e[1]||(e[1]=t("p",null," By default monad will deploy your lambda function with minimum role and policy adequate for execution. ",-1)),e[2]||(e[2]=t("h6",null,"Custom Policy",-1)),t("p",null,[i(o,{code:n.policy,language:"bash"},null,8,["code"])]),e[3]||(e[3]=t("p",{class:"doc-ref"},[t("a",{href:"https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_elements_statement.html"},"Policy Structure"),t("br"),t("a",{href:"https://docs.aws.amazon.com/eventbridge/latest/userguide/eb-rule-conditions.html"},"Policy Simulator"),t("br"),t("a",{href:"https://docs.aws.amazon.com/service-authorization/latest/reference/reference_policies_actions-resources-contextkeys.html"},"Actions, Resources & Conditions")],-1)),e[4]||(e[4]=t("h6",null,"Custom Role Policy",-1)),t("p",null,[i(o,{code:n.trust,language:"bash"},null,8,["code"])]),e[5]||(e[5]=t("p",{class:"doc-ref"},[t("a",{href:"https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles.html"},"Role Documentation")],-1))])}const je=u(Be,[["render",Ie],["__scopeId","data-v-71b2463f"]]),Ke={name:"EventBridge",components:{Code:m},data(){return{rule:"monad deploy --rule file://rule.json",bus:"monad deploy --bus myBus --rule file://rule.json"}}};function qe(a,e,s,d,n,r){const o=l("Code");return p(),c("div",null,[e[0]||(e[0]=t("h4",null,"EventBridge",-1)),e[1]||(e[1]=t("p",null," To wire up your lambda function to be invoked by eventbridge events you can provide both a bus and rule. ",-1)),e[2]||(e[2]=t("h6",null,"Rule",-1)),t("p",null,[i(o,{code:n.rule,language:"bash"},null,8,["code"])]),e[3]||(e[3]=t("p",{class:"doc-ref"},[t("a",{href:"https://docs.aws.amazon.com/eventbridge/latest/userguide/eb-rule-conditions.html"},"Rule Documentation"),t("br"),t("a",{href:"https://docs.aws.amazon.com/eventbridge/latest/userguide/eb-event-pattern-sandbox.html"},"Rule Sandbox")],-1)),e[4]||(e[4]=t("h6",null,"Bus",-1)),t("p",null,[i(o,{code:n.bus,language:"bash"},null,8,["code"])]),e[5]||(e[5]=t("p",{class:"doc-ref"},[t("a",{href:"https://docs.aws.amazon.com/eventbridge/latest/userguide/eb-event-bus.html"},"Bus Documentation")],-1))])}const Re=u(Ke,[["render",qe],["__scopeId","data-v-75ffede6"]]),Ee={name:"ApiGateway",components:{Code:m},data(){return{mount:"monad deploy --api $api_id_or_name",authorizers:"monad deploy --api name --auth $authorizer_id_or_name",curl:"curl https://${api_gateway_url}/${repo}/${branch}/${service}/"}}};function Ge(a,e,s,d,n,r){const o=l("Code");return p(),c("div",null,[e[0]||(e[0]=t("h4",null,"API Gateway V2",-1)),e[1]||(e[1]=t("p",null," To reverse proxy https traffic to your lambda function you can provide it an HTTP API Gateway V2 on which to mount. ",-1)),e[2]||(e[2]=t("h6",null,"Mount",-1)),t("p",null,[i(o,{code:n.mount,language:"bash"},null,8,["code"])]),e[3]||(e[3]=t("p",{class:"doc-ref"},[t("a",{href:"https://docs.aws.amazon.com/apigateway/latest/developerguide/api-gateway-set-up-simple-proxy.html"},"Greedy Proxies"),t("br"),t("a",{href:"https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/proxy-load-balancer?view=aspnetcore-9.0"},"X-Forwarded-Prefix")],-1)),e[4]||(e[4]=t("h6",null,"Authorizors",-1)),t("p",null,[i(o,{code:n.authorizers,language:"bash"},null,8,["code"])]),e[5]||(e[5]=t("p",{class:"doc-ref"},[t("a",{href:"https://docs.aws.amazon.com/apigateway/latest/developerguide/http-api-access-control-iam.html"},"IAM Authentication"),t("br"),t("a",{href:"https://docs.aws.amazon.com/apigateway/latest/developerguide/http-api-jwt-authorizer.html"},"JWT Authentication"),t("br"),t("a",{href:"https://docs.aws.amazon.com/apigateway/latest/developerguide/http-api-lambda-authorizer.html"},"Custom Authentication")],-1)),e[6]||(e[6]=t("h6",null,"Invoke",-1)),t("p",null,[i(o,{code:n.curl,language:"bash"},null,8,["code"])]),e[7]||(e[7]=t("p",{class:"doc-ref"},[t("a",{href:"https://github.com/okigan/awscurl"},"AWSCurl")],-1))])}const Ze=u(Ee,[["render",Ge],["__scopeId","data-v-1509f99c"]]),Xe={name:"Environment",components:{Code:m},data(){return{dotenv:"monad deploy --env file://.env",df:f`
COPY --from=raylas/mapenv:latest /bin/mapenv /bin/mapenv
ENTRYPOINT ["/bin/mapenv", "ssm", "-i", "-p", "/path/to/env", "--"]
CMD ["./webserver"]
            `}}};function We(a,e,s,d,n,r){const o=l("Code");return p(),c("div",null,[e[0]||(e[0]=t("h4",null,"Environment",-1)),e[1]||(e[1]=t("h6",null,"Non-Sensitive",-1)),e[2]||(e[2]=t("p",null," A dotenv file can be provided to set non-sensitive environment variables. ",-1)),t("p",null,[i(o,{code:n.dotenv,language:"bash"},null,8,["code"])]),e[3]||(e[3]=t("h6",null,"Sensitive",-1)),e[4]||(e[4]=t("p",null," Sensitive environment variables should be provided by alternate means at runtime. ",-1)),t("p",null,[i(o,{code:n.df,language:"dockerfile"},null,8,["code"])]),e[5]||(e[5]=t("p",{class:"doc-ref"},[t("a",{href:"https://git.sr.ht/~raymond/mapenv"},"MapEnv"),t("br"),t("a",{href:"https://docs.aws.amazon.com/systems-manager/latest/userguide/systems-manager-parameter-store.html"},"Parameter Store"),t("br"),t("a",{href:"https://docs.aws.amazon.com/secretsmanager/latest/userguide/intro.html"},"Secrets Manager")],-1))])}const Te=u(Xe,[["render",We],["__scopeId","data-v-e6395947"]]),Ue={name:"Conventions",components:{Code:m},data(){return{tag:"${id}.dkr.ecr.${region}.amazonaws.com/${owner}/${repo}/${service}:${branch}",entrypoint:f`
            COPY --from=public.ecr.aws/awsguru/aws-lambda-adapter:0.8.4 /lambda-adapter /opt/extensions/lambda-adapter
            ENTRYPOINT ["./webserver"]
            `}}};function Ve(a,e,s,d,n,r){const o=l("Code");return p(),c("div",null,[e[0]||(e[0]=t("h4",null,"Artifact",-1)),e[1]||(e[1]=t("p",null," The deployable artifact of Monad is an OCI / Docker image hosted on AWS ECR. ",-1)),e[2]||(e[2]=t("h6",null,"Tag",-1)),e[3]||(e[3]=t("p",null," By default, Monad assumes the tag of your deployable artifact to follow: ",-1)),t("p",null,[i(o,{code:n.tag,language:"bash"},null,8,["code"])]),e[4]||(e[4]=t("h6",null,"Entrypoint",-1)),e[5]||(e[5]=t("p",null,[b(" All service scaffolds provided by "),t("code",null,"monad init"),b(" implement a language agnostic pattern which assumes the entrypoint of your application is a webserver. This approach is not strictly necessary. Monad only holds this as an opinionated core pattern. ")],-1)),t("p",null,[i(o,{code:n.entrypoint,language:"dockerfile"},null,8,["code"])]),e[6]||(e[6]=t("p",{class:"doc-ref"},[t("a",{href:"https://github.com/awslabs/aws-lambda-web-adapter"},"AWS Lambda Web Adapter")],-1))])}const Ne=u(Ue,[["render",Ve],["__scopeId","data-v-1adb0f34"]]),Fe={name:"Dive",components:{IAM:je,EventBridge:Re,ApiGateway:Ze,Environment:Te,Artifact:Ne}};function Ye(a,e,s,d,n,r){const o=l("Artifact"),v=l("Environment"),h=l("IAM"),g=l("EventBridge"),y=l("ApiGateway");return p(),c("div",null,[e[0]||(e[0]=t("h3",null,"Dive",-1)),i(o),i(v),i(h),i(g),i(y)])}const Qe=u(Fe,[["render",Ye]]),_={name:"MonadAnimation",props:{size:{type:String,default:"200px"}}},M=()=>{x(a=>({"21029a9e":a.size}))},D=_.setup;_.setup=D?(a,e)=>(M(),D(a,e)):M;const He={class:"monad-container"};function Le(a,e,s,d,n,r){return p(),c("div",He,e[0]||(e[0]=[A('<div class="monad-core" data-v-d1b41da6><div class="perception-layer layer-1" data-v-d1b41da6><div class="perception-dot dot-1" data-v-d1b41da6></div><div class="perception-dot dot-2" data-v-d1b41da6></div><div class="perception-dot dot-3" data-v-d1b41da6></div><div class="perception-dot dot-4" data-v-d1b41da6></div><div class="perception-dot dot-5" data-v-d1b41da6></div><div class="perception-dot dot-6" data-v-d1b41da6></div></div><div class="perception-layer layer-2" data-v-d1b41da6><div class="perception-dot dot-7" data-v-d1b41da6></div><div class="perception-dot dot-8" data-v-d1b41da6></div><div class="perception-dot dot-9" data-v-d1b41da6></div><div class="perception-dot dot-10" data-v-d1b41da6></div></div><div class="perception-layer layer-3" data-v-d1b41da6><div class="perception-dot dot-11" data-v-d1b41da6></div><div class="perception-dot dot-12" data-v-d1b41da6></div></div><div class="inner-essence" data-v-d1b41da6></div><div class="consciousness-ripple ripple-1" data-v-d1b41da6></div><div class="consciousness-ripple ripple-2" data-v-d1b41da6></div><div class="consciousness-ripple ripple-3" data-v-d1b41da6></div></div>',1)]))}const Je=u(_,[["render",Le],["__scopeId","data-v-d1b41da6"]]),et={class:"content"},tt={class:"logo-container"},nt={__name:"App",setup(a){const e={"/home":X,"/design":U,"/usage":xe,"/dive":Qe},s=B(window.location.hash);window.addEventListener("hashchange",()=>{s.value=window.location.hash});const d=I(()=>e[s.value.slice(1)||"/home"]||NotFound);return(n,r)=>(p(),c("div",et,[t("nav",null,[t("ul",null,[t("li",null,[t("h1",tt,[i(Je,{class:"logo-scaled"}),r[0]||(r[0]=t("span",null,[t("a",{href:"#/home",class:"contrast"},"Monad")],-1))])])]),r[1]||(r[1]=t("ul",null,[t("li",null,[t("a",{class:"contrast",href:"#/design"},"Design")]),t("li",null,[t("a",{class:"contrast",href:"#/usage"},"Usage")]),t("li",null,[t("a",{class:"contrast",href:"#/dive"},"Dive")]),t("li",null,[t("a",{class:"contrast",href:"https://github.com/bkeane/monad"},"Source")])],-1))]),(p(),j(K(d.value)))]))}},ot=u(nt,[["__scopeId","data-v-e205199e"]]);w.registerLanguage("bash",R);w.registerLanguage("dockerfile",E);q(ot).mount("#app");
